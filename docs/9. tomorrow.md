docker run -d -p 6379:6379 redis:latest  


3 tasks:


1. Check debugging for the capital allocation

2. compare the ui imporvements from o3:

Especially: 

- distribution sparkline to replace current ugly bar chart
- drill-down  hover on score bar reveals per-token weight contribution; optional PCA scatterplot. Instead of current implementation in key insights

Adopt three-tier information hierarchy.

Structural inconsistencies
• ✅ EnhancedKeyInsights expects results.walletVectorsUsed but server payload in page.tsx may not guarantee that key. Guard it.
• ✅ ScoreBar width calculation lacks clamp; score > 1 renders bar off‐bounds.
• ✅ capitalOverlapPctA/B are computed from fractional weights then multiplied by 100; sum of many shared tokens can exceed 100 → misleading percentages.
• ✅ WalletBadge uses inline button inside anchor; nested interactive elements violate HTML spec and cause accessibility errors.
• ❌ Emojis mixed with lucide-react icons create style drift.
• ✅ Hard-coded h-[700px] scroll area in EnhancedKeyInsights breaks on small screens.
• ❌ Duplicate addresses filtered in page.tsx but EnhancedKeyInsights still uses unfiltered results; possible mismatch if backend rejects duplicates differently.

Presentation overhaul directives
Layout

❌ 12-column CSS grid:
 • col-span-8 → "Key Insights & Pairwise Deep-Dive".
 • col-span-4 → "Most Common Tokens" + global metrics.
 • ❌ sticky top toolbar (wallet input, analyze button, sync status).

❌ Inside "Key Insights" replace vertical card stack with virtualized list (react-window). Maintain scroll-sync with token panel.

❌ Collapse each pair into a single-line summary row; click to reveal detailed token table (reuse shadcn Accordion).

Visual hierarchy
❌ 4. Replace emojis with lucide icons:
 VeryHighSimilarity → LinkIcon
 SustainedAlignment → Handshake
 SignificantAsymmetry → Scales
 BehavioralMirror → Users2
 CapitalDivergence → ArrowUpRightFromSquare
 SharedZeroHoldings → Ban
❌ 5. Color system: use Tailwind semantic tokens; insight badge bg-{color}-100 text-{color}-800 border-{color}-200 for WCAG contrast.
❌ 6. Use font-mono only for addresses and mints; everywhere else default Sans.

Data density
❌ 7. Default view shows:
 walletA | walletB | BehavioralScore | CapitalScore | InsightType
 Scores rendered with <Progress value={score*100} max={100}/> inside 96-px bar.
❌ 8. Detailed view tables paginated (PageSize=10) with column freeze on token mint.
❌ 9. Global summary card above lists:
 Total wallets analysed, pairs > 0.5 behavioral, pairs > 0.5 capital, top token frequency histogram.

Interaction
❌ 10. WalletBadge becomes <Button variant="ghost" size="sm"> with onCopy; external link moved to icon button placed after badge to avoid nested click targets.
❌ 11. Add <Input type="file"> to accept CSV of wallets; parse client-side.
❌ 12. Use Skeleton components for loading state instead of "Analyzing…".

Accessibility & performance
✅ 13. aria-labels on icons, buttons, accordions.
❌ 14. Prefer next/image for token logos when metadata ready; set width/height to avoid CLS.
✅ 15. Memoize heavy calculations (capitalOverlap) with useMemo keyed by sharedTokens.length


