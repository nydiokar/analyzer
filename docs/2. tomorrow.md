37Mjsj8ADNTZsvgfXNsrqAcEfhhfphy5UpcBojFmX5LPmoWvzMMjd8K21j4DmiDKeDZo55wApzkJSz8Gfkvep6yU - check we got double the amounts of SOL again ... 

Check native SOl


# Print out report for one of the wallets and compare to solscan

## Proposed Changes for Next Session (Refining Analysis & Stats)

**Goal:** Make the final P/L results and advanced statistics more focused on *trading performance* by excluding noise from SOL internal movements (WSOL) and stablecoin conversions.

**1. Modify `transfer-analyzer-service.ts` (`analyzeSwapRecords` function):**

*   **Change:** Just before returning the `SwapAnalysisSummary`, filter the `finalResults` array to remove any records where `tokenAddress === SOL_MINT` (i.e., remove WSOL records).
*   **Reasoning:** 
    *   The calculated `netSolProfitLoss` for WSOL itself primarily reflects fees and the value movement, not speculative trading profit/loss in the same way as other tokens.
    *   Including raw WSOL results directly in the main summary list used for reporting can be confusing and skew perceptions of overall trading P/L.
    *   This change focuses the primary `results` array on the performance of non-SOL tokens.

**2. Modify `helius-analyzer.ts` (`performAnalysisForWallet` function):**

*   **Change:** When calling `calculateAdvancedStats(analysisSummary.results)`, first filter `analysisSummary.results` to exclude records where `isValuePreservation === true` (i.e., remove stablecoins).
    *   *(Note: WSOL is already removed by the change above before this point)*.
*   **Reasoning:**
    *   Advanced stats like win rate, median PnL per token, profit consistency index, etc., are intended to measure the performance of *speculative trading activity*.
    *   Stablecoin swaps represent value preservation or fiat on/off ramping, not typical trading, and including them would distort these performance metrics.
    *   This ensures the advanced stats accurately reflect the results of trading non-stablecoin, non-SOL assets.

**Outcome:** These changes will lead to cleaner P/L reports and more meaningful advanced stats, focusing on the user's trading results with SPL tokens, while the underlying granular data (including SOL/WSOL/fees) remains available in the `SwapAnalysisInput` table if needed for deeper dives.



# we need to exclude the SOL value being associate to SPL fees: 
 
 "When processing transaction X, calculate total amount for mint Y, then ignore SwapAnalysisInput rows for mint Y where amount < 0.10 * total_amount_for_mint_Y".